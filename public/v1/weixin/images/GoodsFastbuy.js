var _Ptn=/^\d+$/;var PagePOPLoginOK=null;var _IsLoadLoginJS=false;var _IsLoadPlJs=false;var GoodsID=0;var _UserBalance=0;var _IsLimitBuy=false;var _LimitBuyNum=0;var _BuyedNum=0;var _GotoPayPage=false;var _IsBuySubmiting=false;var FastBuyFun=null;var AutoNext="_AutoNext";var AutoNextExpTime=365;var buyFun=null;var $cartFun=new $CartComm();var HrefURL={loginIndex:"/"+Gobal.SiteVer+"/passport/login.do?forward="+Gobal.WxDomain,loginDetails:"/"+Gobal.SiteVer+"/passport/login.do",PayPwdCheck:"/"+Gobal.SiteVer+"/member/PayPwdCheck.do?update=1",goodsbuylist:"/"+Gobal.SiteVer+"/member/goodsbuylist.do"};var GetJPDataEx=function(c,a,b){$.getJSON("https://trade.1yyg.com/JPData/API.ashx?action="+c+"&"+a+"&fun=?",b)};var clickAgain=0;var PageTag=0;var loginFun=function(){if(PageTag==0){location.href=HrefURL.loginIndex}else{location.href=HrefURL.loginDetails+"?forward="+Gobal.WxDomain+"/"+Gobal.SiteVer+"/products/"+GoodsID+".do"}};$.fn.formatInput=function(c){var h=null;var b="",a=/^\d{1,}$/;var f={min:0,max:10,deimiter:"",onlyNumber:true,copy:false,callback:function(){}};var d=$.extend({},f,c);var e=$(this);e.css({imeMode:"Disabled"}).attr("maxlength",d.max);if(e.val()!=""){e.val(e.val().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1"+d.deimiter))}var g=function(){if(e.val()=="0"){e.val("")}if(e.val()!=""&&e.val()!=b){if(d.onlyNumber){if(!a.test(e.val().replace(/\s/g,""))){e.val(e.val().replace(/\D/g,""))}}var i=d.max-(d.deimiter!=""?(d.max%4):0);if(i>0&&e.val().length>i){e.val(e.val().replace(/\s/g,"").substring(0,i))}e.val(e.val().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1"+d.deimiter));b=e.val();if(d.callback){d.callback()}}};e.bind("inpout",function(){g()}).bind("onpaste",function(){return !clipboardData.getData("text").match(/\D/)})};var updateCodeInfoFun=function(f,b){var d=f[0],j=f[1],a=f[2],g=f[3],k=f[4],c=f[5];var e=parseInt(a),h=parseInt(g),i=parseInt(e*100)/h;i=e>0&&i<1?1:i;b.attr("codeID",d).attr("codePeriod",j);if(PageTag==0){b.find("p.g-name").find("em").html(j);b.find("ins.gray9").html("价值：￥"+parseFloat(g)+".00");b.find("div[name='buyBox']").attr("alreadybuy",e).attr("surplus",k);b.find("span.pgbar").css("width",i+"%")}else{b.find("a[name='buyBox']").attr("alreadybuy",a).attr("surplus",k);$(".u-progress").html('<span class="pgbar" style="width:'+i+'%;"><span class="pging"></span></span>');$(".P-bar01").find("em").html(e);$(".P-bar02").find("em").html(h);$(".P-bar03").find("em").html(k);$("#Period").html(j)}};var cartNumAnim=function(a){a.removeClass("active");a[0].offsetWidth=a[0].offsetWidth;a.addClass("active")};$.fn.GoodsCountFun=function(h,o){var m=$(this).find("#i_num");var a=parseInt(m.attr("surplus"));var n=m.prev();var j=m.next();var r=$("#btnConfirmBuy");var i=$(this).find("#pMsg");var q=function(t){i.html(t);setTimeout(function(){i.html("")},3000)};var s="<s></s>已超过100人次，谨慎参与哦",e="<s></s>最少需参与1人次";var l=function(t){return _BuyedNum==0?"最多可参与"+t+"人次":"您已参与"+_BuyedNum+"人次，最多可参与"+t+"人次"};var c=$("#divPayInfo");var d=function(u,t){_GotoPayPage=true;c.find("span.orange").html("余额不足");r.html("使用其它方式支付")};var b=1;var p=function(t){b=t;m.val(t);if(_UserBalance>0){if(t>_UserBalance){d(t,350)}else{_GotoPayPage=false;c.find("span.orange").html("-￥"+t+".00");r.html("确认支付")}}else{d(t,340)}f()};var f=function(){if(b==1){n.addClass("z-less2");j.removeClass("z-add2")}else{if(b==a){n.removeClass("z-less2");j.addClass("z-add2")}else{n.removeClass("z-less2");if(_IsLimitBuy&&b==(_LimitBuyNum-_BuyedNum)){j.addClass("z-add2")}else{j.removeClass("z-add2")}}}};m.bind("input",function(){var t=m.val();if(t!=""){a=parseInt($("#i_num").attr("surplus"));if(!_Ptn.test(t)){q("");p(b)}else{if(t==0){q(e);p(1)}else{if(t<=a){if(_IsLimitBuy){if(t>_LimitBuyNum-_BuyedNum){t=_LimitBuyNum-_BuyedNum;q(l(t))}else{if(t>100){q(s)}else{q("")}}}else{if(t>100){q(s)}else{q("")}}p(t)}else{a=parseInt($("#i_num").attr("surplus"));t=a;if(_IsLimitBuy){if(t>_LimitBuyNum-_BuyedNum){t=_LimitBuyNum-_BuyedNum;q(l(t))}else{if(t>100){q(s)}else{q("最多可参与"+t+"人次")}}}else{q("最多可参与"+t+"人次")}p(t)}}}}}).bind("blur",function(){if(m.val()==""){m.val(1)}});n.click(function(){var t=m.val();if(_Ptn.test(t)){var u=parseInt(t);if(u>1){q("");u--;if(u>100){q(s)}else{q("")}cartNumAnim(m);p(u)}else{}}return false});j.click(function(){var t=m.val();if(_Ptn.test(t)){var u=parseInt(t);a=parseInt($("#i_num").attr("surplus"));if(u<a){q("");u++;if(_IsLimitBuy){if(u>_LimitBuyNum-_BuyedNum){u=_LimitBuyNum-_BuyedNum}else{if(u>100){q(s)}else{q("")}cartNumAnim(m)}}else{if(u>100){q(s)}else{q("")}cartNumAnim(m)}p(u)}else{q("最多可参与"+a+"人次")}}return false});var k=function(t){GetJPData("","CheckCodePeriod","codeID="+t,function(u){var y=u.code;if(y==-5){FailDialog("您参与人次已达上限！",CloseDialog())}else{if(y==1){var w=u.NewCodeInfo;if(w!=""){var z=w.split("|");if(z!=null&&z.length==6){o=parseInt(z[0]);var v=function(){updateCodeInfoFun(z,h);clickAgain=1;$FastBuyObj.click()};var x=function(){updateCodeInfoFun(z,h)};MsgBox.ShowNextPeriod(v,x,z[1])}}else{MsgBox.ShowGoodsOver()}}}})};var g=function(t){if(parseInt(b)>0&&m.val()!=""&&_Ptn.test(m.val())){var u=$("#p_buynext").find("i").hasClass("z-not-check")?0:1;GetJPData("","shopCartFast","codeID="+t+"&num="+b+"&isBuyNext="+u,function(v){if(v.code==0){if(_GotoPayPage){$.cookie("_FastBuy",1,{domain:"1yyg.com",path:"/",expires:1});$cartFun.addShopCart(t,b,function(){$cartFun.setSelValue(t,b,function(){location.href="/"+Gobal.SiteVer+"/mycart/Payment.do?bx="+u})})}else{buyFun=function(A){if(_IsBuySubmiting){return}_IsBuySubmiting=true;MsgBox.ShowPayState(0);var B=0;GetJPDataEx("UserPay","device=0&integral=0&isBalance=1&checkSN="+encodeURI(A)+"&isBuyNext="+u,function(D){var G=D.state;if(G==0){var C=D.str;var F=null;var E=function(H,I){B++;MsgBox.ShowPayState(1);GetJPData("https://api.1yyg.com","getshopresult","t=0&id="+H,function(W){var Q=W.code;if(Q==0){if(F!=null){clearInterval(F)}var J=W.state;if(J==1||J==2){var M=W.data;if(M.length==0){MsgBox.ShowPayFail();return}var N=M[0].buyNum;MsgBox.ShowBuySuccess(PageTag,N,(b-N));if(PageTag==0){var K=$("#ulGoodsList").find('li[codeID="'+t+'"]'),L=K.find("div[name='buyBox']");var T=L.attr("totalnum"),S=L.attr("alreadybuy"),S=parseInt(S)+parseInt(b),V=L.attr("surplus"),V=parseInt(V)-parseInt(b);var U=parseInt(S*100)/T,U=S>0&&U<1?1:U;K.find(".pgbar").css("width",U+"%");L.attr("alreadybuy",S).attr("surplus",V)}else{var R=$(".P-bar01").find("em"),P=$(".P-bar02").find("em"),O=$(".P-bar03").find("em");var T=P.html(),S=R.html(),S=parseInt(S)+parseInt(b),V=O.html(),V=parseInt(V)-parseInt(b);var U=parseInt(S*100)/T,U=S>0&&U<1?1:U;$(".u-progress").html('<span class="pgbar" style="width:'+U+'%;"><span class="pging"></span></span>');R.html(S);P.html(T);O.html(V);$("a[name='buyBox']").attr("alreadybuy",S).attr("surplus",V)}}else{MsgBox.ShowPayFail()}}else{if(I>=3){MsgBox.ShowGetPayResultFail()}else{if(B>=3){if(F!=null){clearInterval(F);F=null}MsgBox.ShowGetPayResultAgain(E,C,I)}}}_IsBuySubmiting=false})};F=setInterval(function(){E(C,0)},3000)}else{if(G==10){location.reload()}else{if(G==1||G==4){k(t)}else{MsgBox.ShowBuyFail()}}_IsBuySubmiting=false}})};if(v.num==0){buyFun("")}else{PayPwdFun.ShowPaypwd()}}}else{if(v.code==1){var x=v.NewCodeInfo;if(x!=""){var z=x.split("|");if(z!=null&&z.length==6){o=parseInt(z[0]);var w=function(){updateCodeInfoFun(z,h);clickAgain=1;$FastBuyObj.click()};var y=function(){updateCodeInfoFun(z,h)};MsgBox.ShowNextPeriod(w,y,z[1])}}else{MsgBox.ShowGoodsOver()}}else{if(v.code==10){location.reload()}else{MsgBox.ShowBuyFail()}}}})}else{m.focus().select();q(e)}};r.click(function(){g(o);return false})};var $FastBuyObj=null;$.fn.GoodsBuyFun=function(){var a=null;if(PageTag==0){a=$(this).children("a").eq(0)}else{a=$(this)}a.bind("click",function(d){stopBubble(d);var b=function(i){try{_czc.push(["_trackEvent","微信首页","点击","立即1元云购","",""])}catch(k){}var o=a;$FastBuyObj=o;var p=null;if(PageTag==0){p=o.parent().parent();_IsLimitBuy=parseInt(o.parent().attr("limitBuy"))>0}else{p=o.parent();_IsLimitBuy=parseInt(o.attr("limitBuy"))>0;GoodsID=p.attr("goodsID")}var m=p.find("img[name='goodsImg']");var g=p.attr("codeID"),h=p.attr("codePeriod");var l=function(s,r,q){g=p.attr("codeID"),h=p.attr("codePeriod");_UserBalance=s;_LimitBuyNum=parseInt(r);_BuyedNum=parseInt(q);_GotoPayPage=false;var u=0;if(PageTag==0){u=parseInt(o.parent().attr("surplus"))}else{u=parseInt(o.attr("surplus"))}var t=_IsLimitBuy?('/ 限购<i class="orange">'+_LimitBuyNum+"</i>人次"):"";var e=clickAgain?'<em class="orange">已更新至</em>第'+h+"云":'<em class="orange"></em>第'+h+"云";Html='<div class="buy-Pop-ups clearfix">    <div class="m-goods-info">        <cite class="fl"><img src="'+m.attr("src")+'" />'+(_IsLimitBuy?('<b class="z-set"></b>'):"")+'</cite>        <p class="fl">            <span class="gray3" id="spPeriod">'+e+'</span>            <span class="gray9">剩余<i class="orange" id="iSurplus">'+u+"</i>人次 "+t+'</span>        </p>    </div>    <div class="m-goods-num clearfix">        <div class="control-num-con"  id="divNumber">            <ul class="flex-box">                <li>我要云购</li>                <li class="f-control-number box">                   <div class="flex-box">                        <i class="z-set z-less1 z-less2" id="num_del"></i><input id="i_num" type="tel" value="1" maxlength="7" surplus="'+u+'" class="box"/><i class="z-set z-add1"  id="num_add"></i>                    </div>                </li>                <li>人次</li>            </ul>        <p class="orange" id="pMsg"></p>        </div>        <div class="total-pay flex-box" id="divPayInfo">            <span><em class="gray3">余额支付</em>(￥<i>'+_UserBalance+'.00</i>)</span>            <span class="orange">'+(_UserBalance>0?"-￥1.00":"余额不足")+'</span>        </div>    </div>        <div class="m-goods-pay">        <a id="btnConfirmBuy" href="javascript:void();">'+(_UserBalance>0?"确认支付":"使用其它方式支付")+'</a>        <span class="gray6" id="p_buynext"><i class="z-set"></i>如被抢光自动参与最新一云</span>    </div>	<div class="dialog-close" id="btnClose"></div></div>';if(_UserBalance<1){_GotoPayPage=true}ReadFun=function(){var v=$("#pageDialog");$("#i_num",v).formatInput({max:7});$("#divNumber",v).GoodsCountFun(p,g);var x=$("#p_buynext",v);x.click(function(){var y=$(this).find("i");if(y.hasClass("z-not-check")){y.removeClass("z-not-check");$.cookie(AutoNext,"1",{expires:AutoNextExpTime,path:"/"})}else{y.addClass("z-not-check");$.cookie(AutoNext,"0",{expires:AutoNextExpTime,path:"/"})}});$(document).on("click","#btnClose",function(){CloseDialog()});var w=x.find("i");if($.cookie(AutoNext)=="0"){w.addClass("z-not-check")}if(typeof window.FastClick.attach==="function"){window.FastClick.attach(v[0])}};n(true,Html,ReadFun)};var n=function(r,e,q){r=r||false;e=e||"";q=q||null;GetJPData("","CheckCodePeriod","codeID="+g,function(s){var u=s.code;if(u==1){var t=s.NewCodeInfo;if(t!=""){var v=t.split("|");if(v!=null&&v.length==6){g=parseInt(v[0]);updateCodeInfoFun(v,p);if(r){MsgBox.ShowNextConfirmBox(v,q,e)}$("#spPeriod").html('<em class="orange">已更新至</em>第'+v[1]+"云");$("#iSurplus").html(v[4]);$("#i_num").attr("surplus",v[4])}}else{MsgBox.ShowGoodsOver()}}else{ShowDialog(e,340,254,q)}})};var j=function(){GetJPData("https://api.1yyg.com","checkLoginEx","",function(e){if(e.code==0){l(e.money,0,0)}else{if(e.code==10){loginFun()}}})};var f=function(){GetJPData("https://api.1yyg.com","checkUserLimitBuy","codeID="+g,function(e){if(e.code==0){l(e.userMoney,e.codeLimitBuy,e.buyNum)}else{if(e.code==-5){n()}else{if(e.code==-6){FailDialog("您参与人次已达上限！")}else{if(e.code==-10){loginFun()}}}}})};FastBuyFun=function(){if(_IsLimitBuy){f()}else{j()}};FastBuyFun()};var c=new CheckAntiApi(b);c.check()})};$.fn.FastBuyInitial=function(a){PageTag=a;if(a==0){$(this).find("div[name='buyBox']").GoodsBuyFun()}else{if(a==1){$(this).find("a[name='buyBox']").GoodsBuyFun()}}};var stopBubble=function(a){if(a&&a.stopPropagation){a.stopPropagation()}else{window.event.cancelBubble=true}};var Dialog,ReadFun,Html;var ShowDialog=function(b,c,a,d){CloseDialog();if(c==undefined||c==null){c=300}if(a==undefined||a==null){a=154}Dialog=new $.PageDialog(b,{W:c,H:a,autoClose:false,ready:d})};var OKDialog=function(b,a){$.PageDialog.ok(b,a)};var FailDialog=function(b,a){$.PageDialog('<div class="Prompt">'+b+"</div>",{W:150,H:45,autoTime:1000,autoClose:true,submit:typeof(a)=="function"?a:function(){}})};var CloseDialog=function(){clickAgain=0;$("#pageDialog").remove();$("#pageDialogBG").remove()};var MsgBox={ShowBuySuccess:function(b,c,d){var a="";if(d>0){a="，失败"+d+"人次"}Html='<div class="dialog-widget">   <i class="dialog-status right-icon"></i>	<h6 class="dialog-right">支付成功！</h6>	<p class="dialog-small-tips">成功参与'+c+"人次"+a+'</p>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnSure">继续云购</a>		<a href="'+HrefURL.goodsbuylist+'" class="dialog-btn orange-fill-btn">查看云购记录</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();if(b==1){location.reload()}});$("#btnClose").click(function(){CloseDialog();if(b==1){location.reload()}})};ShowDialog(Html,300,154,ReadFun)},ShowPayFail:function(){Html='<div class="dialog-widget">	<i class="dialog-status warn-icon"></i>	<h6 class="dialog-warn">支付失败！</h6>	<p class="dialog-small-tips">支付金额将返回您的账户余额</p>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnSure">确定</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();location.reload()});$("#btnClose").click(function(){CloseDialog();location.reload()})};ShowDialog(Html,300,154,ReadFun)},ShowPayState:function(a){var b="正在支付";if(a==1){b="正在获取支付结果"}Html='<div class="dialog-widget">	<h6 class="dialog-warn dialog-waiting">'+b+'…</h6>	<div class="u-progress">		<span class="pgbar">			<span class="pging"></span>		</span>	</div></div>';ShowDialog(Html,300,154,$.noop())},ShowGetPayResultAgain:function(a,b,c){Html='<div class="dialog-widget">	<i class="dialog-status error-icon"></i>	<h6 class="dialog-warn">暂时无法获取支付结果</h6>	<p class="dialog-small-tips">如参与成功，可在“云购记录”查看结果</p>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnSure">继续云购</a>		<a href="javascript:;" class="dialog-btn orange-fill-btn" id="btnTryAgain">重试</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();location.reload()});$("#btnClose").click(function(){CloseDialog();location.reload()});$("#btnTryAgain").click(function(){c++;a(b,c)})};ShowDialog(Html,300,154,ReadFun)},ShowGetPayResultFail:function(){Html='<div class="dialog-widget">	<i class="dialog-status error-icon"></i>	<h6 class="dialog-warn">暂时无法获取支付结果</h6>	<p class="dialog-small-tips">如参与成功，可在“云购记录”查看结果</p>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnClose">继续云购</a>		<a href="javascript:;" class="dialog-btn orange-fill-btn" id="btnBuyList">查看云购记录</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();location.reload()});$("#btnBuyList").click(function(){location.href=HrefURL.goodsbuylist});$("#btnClose").click(function(){CloseDialog();location.reload()})};ShowDialog(Html,300,154,ReadFun)},ShowBuyFail:function(){Html='<div class="dialog-widget">	<i class="dialog-status error-icon"></i>	<h6 class="dialog-warn">交易异常</h6>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnSure">确定</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();location.reload()});$("#btnClose").click(function(){CloseDialog();location.reload()})};ShowDialog(Html,300,154,ReadFun)},ShowNextPeriod:function(a,b,c){Html='<div class="dialog-widget">	<i class="dialog-status warn-icon"></i>	<h6 class="dialog-warn">啊哦~！被抢光啦！</h6>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnNext">参与下一云</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnNext").click(function(){a()});$("#btnClose").click(function(){b();CloseDialog()})};ShowDialog(Html,300,154,ReadFun)},ShowGoodsOver:function(){Html='<div class="dialog-widget">	<i class="dialog-status warn-icon"></i>	<h6 class="dialog-warn">啊哦~！被抢光啦！</h6>	<div class="dialog-btn-wrapper">		<a href="javascript:;" class="dialog-btn orange-bor-btn" id="btnSure">确定</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog();location.reload()});$("#btnClose").click(function(){CloseDialog();location.reload()})};ShowDialog(Html,300,154,ReadFun)},ShowPaypwdErrInfo:function(a,b){if(a==-5){Html='<div class="dialog-widget">	<h6 class="dialog-warn">输入错误，您还可输入'+b+'次</h6>	<div class="dialog-btn-wrapper">		<a href="'+HrefURL.PayPwdCheck+'" class="dialog-btn orange-bor-btn">忘记密码</a>		<a href="javascript:;" class="dialog-btn orange-fill-btn" id="btnTryPwdAgain">重试</a>	</div>	<div class="dialog-close"  id="btnClose"></div></div>';ReadFun=function(){$("#btnTryPwdAgain").click(function(){PayPwdFun.ShowPaypwd()});$("#btnClose").click(function(){CloseDialog()})}}else{if(a==-4){Html='<div class="dialog-widget">	<h6 class="dialog-warn">错误次数过多，请30分钟后再试</h6>	<div class="dialog-btn-wrapper">		<a href="'+HrefURL.PayPwdCheck+'" class="dialog-btn orange-bor-btn">忘记密码</a>		<a href="javascript:;" class="dialog-btn orange-fill-btn" id="btnSure">确定</a>	</div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("#btnSure").click(function(){CloseDialog()});$("#btnClose").click(function(){CloseDialog()})}}else{MsgBox.ShowBuyFail();return}}ShowDialog(Html,300,154,ReadFun)},ShowLoadingBox:function(){Html='<div class="buy-Pop-ups clearfix">';Html+=' <div class="pop-ygx"><img src="'+Gobal.Skin+'/Images/loading.gif" class="pop-loading"></div></div>';$.PageDialog(Html,{W:300,H:254})},ShowNextConfirmBox:function(b,a,c){Html='<div class="buy-Pop-ups clearfix">';Html+='<div class="pop-ygx">已更新到<span class="orange">第<em>'+b[1]+"</em>云</span>，是否继续云购？</div>";Html+='<div class="pop-btn">';Html+='<a href="javascript:;" title="取消" class="gray_btn">取消</a>';Html+='<a href="javascript:;" title="继续云购" class="orange_btn">继续云购</a></div><div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("div.buy-Pop-ups").find("a.gray_btn").click(function(){CloseDialog()});$("div.buy-Pop-ups").find("a.orange_btn").click(function(){ShowDialog(c,340,254,a);$("#spPeriod").html('<em class="orange">已更新至</em>第'+b[1]+"云");$("#iSurplus").html(b[4]);$("#i_num").attr("surplus",b[4])});$("#btnClose").click(function(){CloseDialog()})};ShowDialog(Html,300,254,ReadFun)},ShowNextConfirmBox2:function(a,b){Html='<div class="buy-Pop-ups clearfix">';Html+='<div class="pop-ygx">已更新到<span class="orange">第<em>'+b+"</em>云</span>，是否继续云购？</div>";Html+='<div class="pop-btn">';Html+='<a href="javascript:;" title="取消" class="gray_btn">取消</a>';Html+='<a href="javascript:;" title="继续云购" class="orange_btn">继续云购</a></div><div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){$("div.buy-Pop-ups").find("a.gray_btn").click(function(){CloseDialog()});$("div.buy-Pop-ups").find("a.orange_btn").click(function(){a()});$("#btnClose").click(function(){CloseDialog()})};ShowDialog(Html,300,254,ReadFun)}};var PayPwdFun={isChecking:false,ShowPaypwd:function(){Html='<div class="dialog-widget">	<h6 class="dialog-warn">请输入支付密码</h6>	<div class="pay-wrapper">		<div class="pay-inner" id="sixDigitPassword">		    <input type="tel" id="passwordInput" class="input-box" autofocus>		    <i class="active thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		    <i class="thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		    <i class="thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		    <i class="thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		    <i class="thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		    <i class="thin-bor-right"><span class="circle"></span><span class="cursor"></span></i>		</div>                       </div>	<div class="dialog-close" id="btnClose"></div></div>';ReadFun=function(){var c=$("#pageDialog");var f=$("#sixDigitPassword"),b=$("#passwordInput"),e=f.find("i"),a=e.length;var d=function(h){this.value=(this.value.replace(/[^\d]+/g,""));b.val(this.value);var i=$.trim(this.value),g=i.length;if(g>=a){i=i.slice(0,a);g=a}this.value=i;e.removeClass("current active").slice(0,g).addClass("current").end().eq(g).addClass("active");if(g==6){PayPwdFun.PayPwdCheck(i)}};b.on("input",d);$("#btnClose",c).click(function(){PayPwdFun.isChecking=false;CloseDialog()})};ShowDialog(Html,300,154,ReadFun)},PayPwdCheck:function(a){if(PayPwdFun.isChecking){return}if(/^\d{6}$/.test(a)){PayPwdFun.isChecking=true;GetJPData("https://passport.1yyg.com","checkUPaypwd","paypwd="+a,function(c){PayPwdFun.isChecking=false;var b=c.state;if(b==0){buyFun(c.str)}else{if(b==1){if(c.num==-5){MsgBox.ShowPaypwdErrInfo(-5,c.str)}else{if(c.num==-4){MsgBox.ShowPaypwdErrInfo(-4,"")}}}else{MsgBox.ShowPaypwdErrInfo()}}})}}};