(function(c){var e=new $CartComm();var d={webRender:function(h,g,i){g=g||"after";i=i||"";GetJPData("https://api.1yyg.com","getGuessYouLikeGoods","quantity=4",function(l){if(l.code==0){var p=[];for(var k=0,m=l.listItems.length;k<m;k++){var o=l.listItems[k];p.push({productId:o.goodsID,image:"https://img.1yyg.net/goodspic/pic-200-200/"+o.goodsPic,period:o.codePeriod,productName:o.goodsName,radio:o.codeSales==0?"0":(o.codeSales/o.codeQuantity*100).toFixed(0),sum:o.codeQuantity,codeId:o.codeID,isLimit:o.codeLimitBuy,price:parseInt(o.codePrice).toFixed(2)})}var n=f(p);if(g=="before"){h.before(n)}else{if(g=="after"){h.after(n)}}c(document).on("click","div.gRate>a",function(){var r=c(this).parent().attr("data-productId");var s=null;for(var q=0,j=p.length;q<j;q++){if(p[q].productId==r){s=p[q];break}}d.events.OneJoinCartClickBack(s,h,i)})}})},webPushRender:function(h,g,j){g=g||"after";var i="sortID=0";i+="&brandID=0";i+="&orderFlag=20";i+="&FIdx=1";i+="&EIdx=4";i+="&isCount=0";GetJPData(Gobal.WxDomain,"GetRecGoodList",i,function(l){if(l.code==0){var p=[];for(var k=0,m=l.listItems.length;k<m;k++){var o=l.listItems[k];p.push({productId:o.goodsID,image:"https://img.1yyg.net/goodspic/pic-200-200/"+o.goodsPic,period:o.codePeriod,productName:o.goodsSName,radio:o.codeSales==0?"0":(o.codeSales/o.codeQuantity*100).toFixed(0),sum:o.codeQuantity,codeId:o.codeID,isLimit:o.codeLimitBuy,price:o.codePrice})}var n=f(p);if(g=="before"){h.before(n)}else{if(g=="after"){h.after(n)}}c(document).on("click","div.gRate>a",function(){var s=c(this).parent().attr("data-productId");var t=null;for(var r=0,q=p.length;r<q;r++){if(p[r].productId==s){t=p[r];break}}d.events.OneJoinCartClickBack(t,h,j)})}})},events:{OneJoinCartClickBack:a,BatchJoinCartClickBack:b}};function a(g,h,i){e.addShopCart(g.codeId,1,function(j){if(j.code==0){c.PageDialog.ok("已添加到购物车");if(i!=""){location.href=i}}else{if(result.code==2){c.PageDialog.fail("哎呀！购物车满啦，删除一些吧！")}else{c.PageDialog.fail("添加失败，请重试["+result.code+"]")}}},g.sum,false)}function b(g){}function f(m){var h=[];h.push('<div class="hot-recom">');h.push('<div class="title thin-bor-top gray6">');h.push('<span><b class="z-set"></b>人气推荐</span><em></em>');h.push("</div>");h.push('<div class="goods-wrap thin-bor-top">');h.push('<ul class="goods-list clearfix">');for(var j=0,g=m.length;j<g;j++){var k="";var l=m[j];h.push("<li>");h.push('<a href="'+Gobal.WxDomain+"/"+Gobal.SiteVer+"/products/"+l.productId+'.do" class="g-pic"><img src="'+l.image+'" width="136" height="136">');if(l.isLimit>0){h.push('<div class="pTitle pPurchase">限购</div>')}h.push("</a>");if(l.period==undefined||l.period<0){h.push('<p class="g-name"><a href="'+Gobal.WxDomain+"/"+Gobal.SiteVer+"/products/"+l.productId+'.do">'+l.productName+"</a></p>")}else{h.push('<p class="g-name"><a href="'+Gobal.WxDomain+"/"+Gobal.SiteVer+"/products/"+l.productId+'.do">(第'+l.period+"云)"+l.productName+"</a></p>")}if(l.price<=0||l.price==undefined){l.price="0.00"}h.push('<ins class="gray9">价值:￥'+l.price+"</ins>");h.push('<div class="btn-wrap">');h.push('<div class="Progress-bar"><p class="u-progress"><span class="pgbar" style="width:'+l.radio+'%;"><span class="pging"></span></span></p></div>');h.push('<div class="gRate" data-productId="'+l.productId+'"><a href="javascript:;"><s></s></a></div>');h.push("</div>");h.push("</li>")}h.push("</ul></div></div>");return h.join("")}window.GuessListBox=d})($);