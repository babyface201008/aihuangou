$(function(){var a=function(){var e=function(m){$.PageDialog.fail(m)};var f=function(m){$.PageDialog.ok(m)};var b=0;var i=20;var l={FIdx:1,EIdx:i,isCount:1,brokerType:1};var j=null;var d=$("div.commission-info");var h=function(){var m=function(){return"type="+l.brokerType+"&FIdx="+l.FIdx+"&EIdx="+l.EIdx+"&isCount="+l.isCount};var n=function(){if(l.brokerType==1){_ListObj=d.eq(0).children("dl")}else{_ListObj=d.eq(1).children("dl")}_ListObj.next().show();GetJPData("","getcommissionlist",m(),function(t){if(t.code==0){if(l.isCount==1){l.isCount=0;b=t.str.totalCount}var s=t.str.listItems;var r=s.length;var o="";var q=-1;for(var p=0;p<r;p++){q=parseInt(s[p].logType);if(q==1){o+="<dd><span>"+s[p].buyTime+'</span><span><a href="/'+Gobal.SiteVer+"/userpage/"+s[p].userWeb+'" class="blue"><em>'+s[p].userName+"</em></a></span><span>"+parseFloat(s[p].buyMoney).toFixed(2)+"</span><span>+"+parseFloat(s[p].brokerage).toFixed(2)+"</span></dd>"}else{o+="<dd><span>"+s[p].buyTime+"</span><span>消费</span><span>"+s[p].descript+"</span><span>"+parseFloat(s[p].brokerage).toFixed(2)+"</span></dd>"}}_ListObj.append(o);if(l.EIdx<b){_IsLoading=false}else{if(b>0){_ListObj.append(Gobal.LookForPC)}_ListObj.next().hide()}}else{if(t.code==10){location.reload()}else{if(t.code==-1){_ListObj.next().hide();if(l.FIdx==1){_ListObj.append(Gobal.NoneHtmlEx(t.tips))}}else{_ListObj.next().hide();_ListObj.append(Gobal.ErrorHtml(t.code));_IsLoading=false}}}})};this.getInitPage=function(){l.FIdx=1;l.EIdx=i;l.isCount=1;n()};this.getNextPage=function(){l.FIdx+=i;l.EIdx+=i;n()}};j=new h();j.getInitPage();$("div.commiss-menu").children("a").click(function(){$(this).attr("class","z-checked").siblings().attr("class","");var m=$(this).index();if(m==0){d.eq(m).show().siblings(".commission-info").hide();d.eq(m).find("dt").nextAll().remove();l.brokerType=1}else{d.eq(m).show().siblings(".commission-info").hide();d.eq(m).find("dt").nextAll().remove();l.brokerType=3}_IsLoading=false;j.getInitPage()});var c=$("div.weixin-mask");var k=parseFloat($("#hidCurrMoney").val());var g=$("#hidHasPaypwd").val()=="1";$("#btnMention").click(function(){var m=function(p){$("body").attr("style","overflow:hidden;");var o=$(p);$("body").append(o).find("#closeDiag").click(function(){$("div.acc-pop").remove();c.hide();$("body").attr("style","");IsMasked=false});o.css({top:($(window).height()-o.height()-64)/2,left:($(window).width()-o.width()-32)/2}).show();c.css("height",$(document).height()>$(window).height()?$(document).height():$(window).height()).show();IsMasked=true};if(!g){var n='<div class="acc-pop"><h3 class="gray6">需要设置支付密码才能进行提现</h3><h6 class="gray9">请先设置支付密码再进行提现操作</h6><a id="okDiag" href="PayPwdCheck.do?forward='+escape(location.href)+'" class="orangeBtn">立即设置</a><a id="closeDiag" href="javascript:;" class="box-close z-set"></a></div>';m(n)}else{if(k>=100){location.href="MentionApply.do"}else{e("佣金满100才可提现哦")}}});scrollForLoadData(j.getNextPage)};Base.getScript(Gobal.Skin+"/JS/pageDialog.js?v=160304",a)});